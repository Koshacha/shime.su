import{A as p,al as D,am as F,d as o,i as s,F as m,aj as g,n as N,t as j,an as O,e as z,g as l,f as i,w as b,ao as A,a0 as B,_ as I,ah as T,S as $,W as k,X as C,r as E,D as M,R as h,P as U}from"./By5LxkQQ.js";import{_ as q}from"./6Iz8mA7Q.js";const K={class:"inline-flex gap-2 flex-wrap justify-center"},R=["onClick"],W=p({__name:"Filter",props:D({categories:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(d){const t=F(d,"modelValue");return(n,r)=>(s(),o("div",K,[(s(!0),o(m,null,g(n.categories,e=>(s(),o("button",{key:e,onClick:u=>t.value=e,class:N(["category-filter px-4 py-2 rounded-full text-sm transition-colors duration-300",t.value===e?"bg-accent/20 text-text-primary":"bg-secondary/50 text-text-secondary hover:bg-secondary"])},j(e||n.$t("projects.all")),11,R))),128))]))}}),X=Object.assign(W,{__name:"ProjectFilter"}),G={key:0,class:"relative h-48 overflow-hidden"},H={class:"p-4"},J={class:"flex flex-wrap gap-2 text-sm"},Q=p({__name:"Card",props:{project:{},index:{}},emits:["details"],setup(d,{emit:t}){const n=t,r=()=>{n("details")};return(e,u)=>{const x=q,f=A;return s(),o("div",{class:"project-card group relative bg-secondary rounded-lg overflow-hidden shadow-md transition-all duration-300 hover:shadow-xl cursor-pointer",onClick:r,style:O({animationDelay:`${e.index*.1}s`})},[e.project.image?(s(),o("div",G,[i(f,{to:e.project.path},{default:b(()=>[i(x,{src:e.project.image,alt:e.project.title,class:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105",sizes:"sm:100vw md:50vw lg:400px"},null,8,["src","alt"]),u[0]||(u[0]=l("div",{class:"absolute inset-0 bg-gradient-to-t from-primary/80 to-transparent"},null,-1))]),_:1,__:[0]},8,["to"])])):z("",!0),l("div",H,[i(f,{to:e.project.path,class:"text-lg font-semibold text-text-primary mb-1 block"},{default:b(()=>[B(j(e.project.title),1)]),_:1},8,["to"]),l("div",J,[(s(!0),o(m,null,g(e.project.tags,(c,y)=>(s(),o("span",{key:y,class:"text-text-secondary"},j(c),1))),128))])])],4)}}}),Y=Object.assign(I(Q,[["__scopeId","data-v-32488de1"]]),{__name:"ProjectCard"}),Z={class:"mb-8 overflow-x-auto whitespace-nowrap pb-2"},ee={class:"inline-flex space-x-2"},te=6,se=p({__name:"Filter",setup(d){return(t,n)=>(s(),o("div",Z,[l("div",ee,[(s(),o(m,null,g(te,r=>l("span",{key:r,class:"category-filter px-4 py-2 rounded-full text-sm transition-colors bg-secondary/50 text-text-secondary w-16 h-8"})),64))])]))}}),oe=Object.assign(se,{__name:"ProjectSkeletonFilter"}),ae={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ne=10,re=p({__name:"Cards",setup(d){return(t,n)=>(s(),o("div",ae,[(s(),o(m,null,g(ne,r=>l("div",{key:r,class:"project-card group relative bg-secondary rounded-lg overflow-hidden shadow-md transition-all duration-300 hover:shadow-xl cursor-pointer w-full h-80"})),64))]))}}),le=Object.assign(re,{__name:"ProjectSkeletonCards"}),ce={key:0},ie={class:"mb-8 overflow-x-auto whitespace-nowrap pb-2"},de={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ue={key:1,class:"animate-pulse",role:"status"},_e=p({__name:"List",async setup(d){let t,n;const{locale:r}=T(),{data:e,status:u}=([t,n]=$(()=>k(`posts-${r.value}`,()=>{let a=`/${r.value}/cases`;return a=a.replace("/ru",""),C("project").select("id","title","path","tags","image").where("path","LIKE",`${a}/%`).order("sort","DESC").all()},{lazy:!0})),t=await t,n(),t),{data:x,status:f}=([t,n]=$(async()=>k(`cats-${r.value}`,async()=>{const a=await C("project").select("tags").where("published","=",!0).where("tags","IS NOT NULL").all();return["",...new Set(a.map(w=>w.tags).flat())]},{lazy:!0})),t=await t,n(),t),c=E(""),y=M(()=>e.value?c.value===""?e.value:e.value.filter(a=>"tags"in a&&Array.isArray(a==null?void 0:a.tags)?a.tags.includes(c.value):!1):[]);return(a,_)=>{const w=X,S=Y,V=oe,L=le;return h(f)==="success"&&h(u)==="success"?(s(),o("div",ce,[l("div",ie,[i(w,{categories:h(x),modelValue:c.value,"onUpdate:modelValue":_[0]||(_[0]=v=>c.value=v)},null,8,["categories","modelValue"])]),l("div",de,[(s(!0),o(m,null,g(h(y),(v,P)=>(s(),U(S,{key:v.id,project:v,index:P},null,8,["project","index"]))),128))])])):(s(),o("div",ue,[_[1]||(_[1]=l("span",{class:"sr-only"},"Loading...",-1)),i(V),i(L)]))}}}),ge=Object.assign(_e,{__name:"ProjectList"});export{ge as default};
