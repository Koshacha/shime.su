import{z as _,ad as O,ae as F,c as o,d as s,F as p,ab as m,n as N,t as h,af as P,e as z,g as n,f as v,w as D,Z as A,ag as B,a9 as I,R as b,S as j,U as $,r as T,C as E,Q as f,O as M}from"./CkwM2xjW.js";import{_ as U}from"./DlAUqK2U.js";const q={class:"inline-flex space-x-2"},K=["onClick"],Q=_({__name:"Filter",props:O({categories:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(i){const t=F(i,"modelValue");return(r,l)=>(s(),o("div",q,[(s(!0),o(p,null,m(r.categories,e=>(s(),o("button",{key:e,onClick:d=>t.value=e,class:N(["category-filter px-4 py-2 rounded-full text-sm transition-colors duration-300",t.value===e?"bg-accent/20 text-text-primary":"bg-secondary/50 text-text-secondary hover:bg-secondary"])},h(e||r.$t("projects.all")),11,K))),128))]))}}),R=Object.assign(Q,{__name:"ProjectFilter"}),Z={key:0,class:"relative h-48 overflow-hidden"},G=["src","alt"],H={class:"p-4"},J={class:"text-lg font-semibold text-text-primary mb-1"},W={class:"flex flex-wrap gap-2 text-sm"},X={class:"absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300"},Y=_({__name:"Card",props:{project:{},index:{}},emits:["details"],setup(i,{emit:t}){const r=t,l=()=>{r("details")};return(e,d)=>{const x=B;return s(),o("div",{class:"project-card group relative bg-secondary rounded-lg overflow-hidden shadow-md transition-all duration-300 hover:shadow-xl cursor-pointer",onClick:l,style:P({animationDelay:`${e.index*.1}s`})},[e.project.image?(s(),o("div",Z,[n("img",{src:e.project.image,alt:e.project.title,class:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"},null,8,G),d[0]||(d[0]=n("div",{class:"absolute inset-0 bg-gradient-to-t from-primary/80 to-transparent"},null,-1))])):z("",!0),n("div",H,[n("h3",J,h(e.project.title),1),n("div",W,[(s(!0),o(p,null,m(e.project.tags,(y,c)=>(s(),o("span",{key:c,class:"text-text-secondary"},h(y),1))),128))])]),n("div",X,[v(x,{to:e.project.path,class:"text-xs px-2 py-1 bg-accent/20 backdrop-blur-sm rounded-full text-text-primary"},{default:D(()=>[A(h(e.$t("projects.details")),1)]),_:1},8,["to"])])],4)}}}),ee=Object.assign(U(Y,[["__scopeId","data-v-3fadf81e"]]),{__name:"ProjectCard"}),te={class:"mb-8 overflow-x-auto whitespace-nowrap pb-2"},se={class:"inline-flex space-x-2"},oe=6,ae=_({__name:"Filter",setup(i){return(t,r)=>(s(),o("div",te,[n("div",se,[(s(),o(p,null,m(oe,l=>n("span",{key:l,class:"category-filter px-4 py-2 rounded-full text-sm transition-colors bg-secondary/50 text-text-secondary w-16 h-8"})),64))])]))}}),ne=Object.assign(ae,{__name:"ProjectSkeletonFilter"}),re={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},le=10,ce=_({__name:"Cards",setup(i){return(t,r)=>(s(),o("div",re,[(s(),o(p,null,m(le,l=>n("div",{key:l,class:"project-card group relative bg-secondary rounded-lg overflow-hidden shadow-md transition-all duration-300 hover:shadow-xl cursor-pointer w-full h-80"})),64))]))}}),ie=Object.assign(ce,{__name:"ProjectSkeletonCards"}),de={key:0},ue={class:"mb-8 overflow-x-auto whitespace-nowrap pb-2"},_e={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},pe={key:1,class:"animate-pulse",role:"status"},me=_({__name:"List",async setup(i){let t,r;const{locale:l}=I(),{data:e,status:d}=([t,r]=b(()=>j(`posts-${l.value}`,()=>{let a=`/${l.value}/anken`;return a=a.replace("/ru",""),$("project").select("id","title","path","tags","image").where("path","LIKE",`${a}/%`).order("sort","DESC").all()},{lazy:!0})),t=await t,r(),t),{data:x,status:y}=([t,r]=b(async()=>j(`cats-${l.value}`,async()=>{const a=await $("project").select("tags").where("published","=",!0).where("tags","IS NOT NULL").all();return["",...new Set(a.map(w=>w.tags).flat())]},{lazy:!0})),t=await t,r(),t),c=T(""),k=E(()=>e.value?c.value===""?e.value:e.value.filter(a=>"tags"in a&&Array.isArray(a==null?void 0:a.tags)?a.tags.includes(c.value):!1):[]);return(a,u)=>{const w=R,C=ee,S=ne,V=ie;return f(y)==="success"&&f(d)==="success"?(s(),o("div",de,[n("div",ue,[v(w,{categories:f(x),modelValue:c.value,"onUpdate:modelValue":u[0]||(u[0]=g=>c.value=g)},null,8,["categories","modelValue"])]),n("div",_e,[(s(!0),o(p,null,m(f(k),(g,L)=>(s(),M(C,{key:g.id,project:g,index:L},null,8,["project","index"]))),128))])])):(s(),o("div",pe,[u[1]||(u[1]=n("span",{class:"sr-only"},"Loading...",-1)),v(S),v(V)]))}}}),he=Object.assign(me,{__name:"ProjectList"});export{he as default};
