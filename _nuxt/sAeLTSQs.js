import{A as p,al as P,am as D,d as o,e as s,F as m,aj as g,n as F,t as f,an as N,f as O,h as r,g as _,w as z,a0 as A,ao as B,_ as I,ah as T,S as j,U as $,V as k,r as E,D as M,R as h,P as U}from"./Bk0_wcoN.js";import{_ as q}from"./BXX8ZFsh.js";const K={class:"inline-flex space-x-2"},R=["onClick"],G=p({__name:"Filter",props:P({categories:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(i){const t=D(i,"modelValue");return(n,l)=>(s(),o("div",K,[(s(!0),o(m,null,g(n.categories,e=>(s(),o("button",{key:e,onClick:d=>t.value=e,class:F(["category-filter px-4 py-2 rounded-full text-sm transition-colors duration-300",t.value===e?"bg-accent/20 text-text-primary":"bg-secondary/50 text-text-secondary hover:bg-secondary"])},f(e||n.$t("projects.all")),11,R))),128))]))}}),H=Object.assign(G,{__name:"ProjectFilter"}),J={key:0,class:"relative h-48 overflow-hidden"},Q={class:"p-4"},W={class:"text-lg font-semibold text-text-primary mb-1"},X={class:"flex flex-wrap gap-2 text-sm"},Y={class:"absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300"},Z=p({__name:"Card",props:{project:{},index:{}},emits:["details"],setup(i,{emit:t}){const n=t,l=()=>{n("details")};return(e,d)=>{const x=q,y=B;return s(),o("div",{class:"project-card group relative bg-secondary rounded-lg overflow-hidden shadow-md transition-all duration-300 hover:shadow-xl cursor-pointer",onClick:l,style:N({animationDelay:`${e.index*.1}s`})},[e.project.image?(s(),o("div",J,[_(x,{src:e.project.image,alt:e.project.title,class:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105",sizes:"sm:100vw md:50vw lg:400px"},null,8,["src","alt"]),d[0]||(d[0]=r("div",{class:"absolute inset-0 bg-gradient-to-t from-primary/80 to-transparent"},null,-1))])):O("",!0),r("div",Q,[r("h3",W,f(e.project.title),1),r("div",X,[(s(!0),o(m,null,g(e.project.tags,(c,w)=>(s(),o("span",{key:w,class:"text-text-secondary"},f(c),1))),128))])]),r("div",Y,[_(y,{to:e.project.path,class:"text-xs px-2 py-1 bg-accent/20 backdrop-blur-sm rounded-full text-text-primary"},{default:z(()=>[A(f(e.$t("projects.details")),1)]),_:1},8,["to"])])],4)}}}),ee=Object.assign(I(Z,[["__scopeId","data-v-847d78a0"]]),{__name:"ProjectCard"}),te={class:"mb-8 overflow-x-auto whitespace-nowrap pb-2"},se={class:"inline-flex space-x-2"},oe=6,ae=p({__name:"Filter",setup(i){return(t,n)=>(s(),o("div",te,[r("div",se,[(s(),o(m,null,g(oe,l=>r("span",{key:l,class:"category-filter px-4 py-2 rounded-full text-sm transition-colors bg-secondary/50 text-text-secondary w-16 h-8"})),64))])]))}}),ne=Object.assign(ae,{__name:"ProjectSkeletonFilter"}),re={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},le=10,ce=p({__name:"Cards",setup(i){return(t,n)=>(s(),o("div",re,[(s(),o(m,null,g(le,l=>r("div",{key:l,class:"project-card group relative bg-secondary rounded-lg overflow-hidden shadow-md transition-all duration-300 hover:shadow-xl cursor-pointer w-full h-80"})),64))]))}}),ie=Object.assign(ce,{__name:"ProjectSkeletonCards"}),de={key:0},ue={class:"mb-8 overflow-x-auto whitespace-nowrap pb-2"},_e={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},pe={key:1,class:"animate-pulse",role:"status"},me=p({__name:"List",async setup(i){let t,n;const{locale:l}=T(),{data:e,status:d}=([t,n]=j(()=>$(`posts-${l.value}`,()=>{let a=`/${l.value}/anken`;return a=a.replace("/ru",""),k("project").select("id","title","path","tags","image").where("path","LIKE",`${a}/%`).order("sort","DESC").all()},{lazy:!0})),t=await t,n(),t),{data:x,status:y}=([t,n]=j(async()=>$(`cats-${l.value}`,async()=>{const a=await k("project").select("tags").where("published","=",!0).where("tags","IS NOT NULL").all();return["",...new Set(a.map(b=>b.tags).flat())]},{lazy:!0})),t=await t,n(),t),c=E(""),w=M(()=>e.value?c.value===""?e.value:e.value.filter(a=>"tags"in a&&Array.isArray(a==null?void 0:a.tags)?a.tags.includes(c.value):!1):[]);return(a,u)=>{const b=H,C=ee,V=ne,S=ie;return h(y)==="success"&&h(d)==="success"?(s(),o("div",de,[r("div",ue,[_(b,{categories:h(x),modelValue:c.value,"onUpdate:modelValue":u[0]||(u[0]=v=>c.value=v)},null,8,["categories","modelValue"])]),r("div",_e,[(s(!0),o(m,null,g(h(w),(v,L)=>(s(),U(C,{key:v.id,project:v,index:L},null,8,["project","index"]))),128))])])):(s(),o("div",pe,[u[1]||(u[1]=r("span",{class:"sr-only"},"Loading...",-1)),_(V),_(S)]))}}}),he=Object.assign(me,{__name:"ProjectList"});export{he as default};
